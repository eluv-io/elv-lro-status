<!DOCTYPE html><html class="docs-page" lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="./images/favicon.png"><link href="./css/style.css" rel="stylesheet"><title></title></head><body><!-- ENTIRE BROWSER VIEW AREA--><div class="d-flex flex-column vh-100" id="viewport"><!-- UPPER PANE--><div class="d-flex flex-row border navbar fixed-top align-items-stretch" id="header-row"><div class="d-flex flex-wrap align-items-center" id="logo-container"><a href="https://eluv.io" target="_blank"><img class="m-1" src="./images/logo.png"/></a></div><div class="nav d-flex flex-wrap align-items-stretch" id="title-container"><ul class="nav"><li class="nav-link" id="project-name"><strong>@eluvio/elv-lro-status</strong><span class="ms-1" id="version">v3.0.5</span></li><li class="nav-link inactive-header-tab" id="undefined-li,"><a id="nav-home" href="./index.html">Home</a></li><li class="nav-link active-header-tab" id="undefined-li,"><a id="nav-home" href="./api.html">API Documentation</a></li></ul></div><div class="flex-fill" id="header-space-fill"></div><div id="github-link-container"><ul class="nav"><li class="nav-link"><a href="https://github.com/eluv-io/elv-lro-status" target="_blank">Github</a></li></ul></div></div><!-- LOWER PANE--><div class="d-flex flex-row flex-fill overflow-hidden" id="content-area"><!-- SIDEBAR--><div class="d-flex flex-column flex-shrink-0 border" id="sidebar"><!-- SIDEBAR FILTER CONTROLS--><div class="d-flex flex-column border-bottom" id="filter-controls"><form><div class="m-2 d-flex flex-row"><div class="form-control"><input id="filter-text" type="text" tabindex="1" autofocus="autofocus" data-bind="textInput: filter" autocomplete="false" placeholder="Filter"/><span id="clear-filter-icon"><img src="./images/x-circle.svg"/></span><span id="search-icon"><img src="./images/search.svg"/></span></div></div><div class="m-2"><div class="form-check ms-1"><input class="form-check-input" id="show-private" tabindex="2" type="checkbox" data-bind="textInput: showPrivate"/><label class="form-check-label" for="show-private">Show private</label></div></div></form></div><!-- SIDEBAR ITEM LIST--><div class="d-flex flex-fill flex-column" id="toc"><ul class="nav list-group"><li class="list-group-item-action toc-entry" data-name="defaultOptions" data-category="Miscellaneous" data-access="public" display=""><a href="#defaultOptions">defaultOptions&nbsp;&nbsp;<span class="label label-category" data-category="Miscellaneous">Miscellaneous</span></a></li><li class="list-group-item-action toc-entry" data-name="enhanceLROStatus" data-category="Conversion" data-access="public" display=""><a href="#enhanceLROStatus">enhanceLROStatus&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="enhanceLROStatusEntry" data-category="Conversion" data-access="public" data-curried="data-curried" display=""><a href="#enhanceLROStatusEntry">enhanceLROStatusEntry&nbsp;&nbsp;<strong title="curried"><em>λ</em></strong><span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="LROIdModel" data-category="Model" data-access="public" display=""><a href="#LROIdModel">LROIdModel&nbsp;&nbsp;<span class="label label-category" data-category="Model">Model</span></a></li><li class="list-group-item-action toc-entry" data-name="LROProgressModel" data-category="Model" data-access="public" display=""><a href="#LROProgressModel">LROProgressModel&nbsp;&nbsp;<span class="label label-category" data-category="Model">Model</span></a></li><li class="list-group-item-action toc-entry" data-name="LROStatusEntryModel" data-category="Model" data-access="public" display=""><a href="#LROStatusEntryModel">LROStatusEntryModel&nbsp;&nbsp;<span class="label label-category" data-category="Model">Model</span></a></li><li class="list-group-item-action toc-entry" data-name="LROStatusModel" data-category="Model" data-access="public" display=""><a href="#LROStatusModel">LROStatusModel&nbsp;&nbsp;<span class="label label-category" data-category="Model">Model</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_CANCELLED_SHUTDOWN" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_CANCELLED_SHUTDOWN">LRO_RS_CANCELLED_SHUTDOWN&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_CANCELLED_TIMEOUT" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_CANCELLED_TIMEOUT">LRO_RS_CANCELLED_TIMEOUT&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_CANCELLED_USER" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_CANCELLED_USER">LRO_RS_CANCELLED_USER&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_FAILED" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_FAILED">LRO_RS_FAILED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_FINISHED" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_FINISHED">LRO_RS_FINISHED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_NOT_STARTED" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_NOT_STARTED">LRO_RS_NOT_STARTED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RS_RUNNING" data-category="Constant" data-access="public" display=""><a href="#LRO_RS_RUNNING">LRO_RS_RUNNING&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="LRO_RUN_STATES" data-category="Constant" data-access="public" display=""><a href="#LRO_RUN_STATES">LRO_RUN_STATES&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="mergeDefaultOptions" data-category="Conversion" data-access="public" display=""><a href="#mergeDefaultOptions">mergeDefaultOptions&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="OptionsModel" data-category="Model" data-access="public" display=""><a href="#OptionsModel">OptionsModel&nbsp;&nbsp;<span class="label label-category" data-category="Model">Model</span></a></li><li class="list-group-item-action toc-entry" data-name="STATES" data-category="Constant" data-access="public" display=""><a href="#STATES">STATES&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_BAD_PCT" data-category="Constant" data-access="public" display=""><a href="#STATE_BAD_PCT">STATE_BAD_PCT&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_CANCELLED_SHUTDOWN" data-category="Constant" data-access="public" display=""><a href="#STATE_CANCELLED_SHUTDOWN">STATE_CANCELLED_SHUTDOWN&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_CANCELLED_TIMEOUT" data-category="Constant" data-access="public" display=""><a href="#STATE_CANCELLED_TIMEOUT">STATE_CANCELLED_TIMEOUT&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_CANCELLED_USER" data-category="Constant" data-access="public" display=""><a href="#STATE_CANCELLED_USER">STATE_CANCELLED_USER&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_FAILED" data-category="Constant" data-access="public" display=""><a href="#STATE_FAILED">STATE_FAILED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_FINISHED" data-category="Constant" data-access="public" display=""><a href="#STATE_FINISHED">STATE_FINISHED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_NOT_STARTED" data-category="Constant" data-access="public" display=""><a href="#STATE_NOT_STARTED">STATE_NOT_STARTED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_RUNNING" data-category="Constant" data-access="public" display=""><a href="#STATE_RUNNING">STATE_RUNNING&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_STALLED" data-category="Constant" data-access="public" display=""><a href="#STATE_STALLED">STATE_STALLED&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="STATE_UNKNOWN" data-category="Constant" data-access="public" display=""><a href="#STATE_UNKNOWN">STATE_UNKNOWN&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="_enhanceLROStatus" data-category="Conversion" data-access="private" data-curried="data-curried" display="none"><a href="#_enhanceLROStatus">_enhanceLROStatus&nbsp;&nbsp;<strong title="curried"><em>λ</em></strong><span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="_enhanceNonRunningEntry" data-category="Conversion" data-access="private" display="none"><a href="#_enhanceNonRunningEntry">_enhanceNonRunningEntry&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="_enhanceRunningEntry" data-category="Conversion" data-access="private" display="none"><a href="#_enhanceRunningEntry">_enhanceRunningEntry&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="_maxEnhancedState" data-category="Conversion" data-access="private" display="none"><a href="#_maxEnhancedState">_maxEnhancedState&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="_progressPct" data-category="Conversion" data-access="private" display="none"><a href="#_progressPct">_progressPct&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li><li class="list-group-item-action toc-entry" data-name="_STATE_PRECEDENCE" data-category="Constant" data-access="private" display="none"><a href="#_STATE_PRECEDENCE">_STATE_PRECEDENCE&nbsp;&nbsp;<span class="label label-category" data-category="Constant">Constant</span></a></li><li class="list-group-item-action toc-entry" data-name="_sumEnhancedEntries" data-category="Conversion" data-access="private" display="none"><a href="#_sumEnhancedEntries">_sumEnhancedEntries&nbsp;&nbsp;<span class="label label-category" data-category="Conversion">Conversion</span></a></li></ul></div></div><div class="d-flex flex-fill flex-column flex-grow-0 border-start overflow-auto" id="detail-entries"><div class="section-id" id="defaultOptions"></div><div class="card" data-name="defaultOptions" data-access="public" data-category="Miscellaneous" display=""><h2><a class="name" tabindex="3" href="#defaultOptions">defaultOptions</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/defaultOptions.js#L28"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Miscellaneous">Miscellaneous</span></h2><div class="sig-container"><code class="sig">() → Object</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>Partially populated options  object</p></span></li></ul></div></div><div class="description mt-1"><p>Returns an object containing default options for <code>enhanceLROStatus</code> and <code>enhanceLROStatusEntry</code>.</p>
<p>Note that you must still add a <code>currentTime</code> property to the result before use.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> defaultOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/defaultOptions&#x27;</span>)

<span class="hljs-comment">// Output when system is set to US / Pacific timezone</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">defaultOptions</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
<span class="hljs-string">`{
  &quot;locale&quot;: &quot;en-US&quot;,
  &quot;stallThreshold&quot;: 900,
  &quot;timezone&quot;: &quot;America/Los_Angeles&quot;
}`</span></code></pre></div><div class="section-id" id="enhanceLROStatus"></div><div class="card" data-name="enhanceLROStatus" data-access="public" data-category="Conversion" display=""><h2><a class="name" tabindex="3" href="#enhanceLROStatus">enhanceLROStatus</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhanceLROStatus.js#L102"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">(Object, Object) → Object</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">options</code><span class="ms-1 description"></span></li><li class="list-group-item"><strong>Date</strong><code class="ms-2 param-name">options:currentTime</code><span class="ms-1 description"><p>The value to use for current time (this is used to compute <code>eta_local</code>)</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options:locale</code><span class="ms-1 description"><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale">Javascript Intl.Locale</a> string to use to format <code>eta_local</code></p></span></li><li class="list-group-item"><strong>Number</strong><code class="ms-2 param-name">options:stallThreshold</code><span class="ms-1 description"><p>How many seconds to wait since LRO info last updated before warning that LRO may have terminated</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options:timezone</code><span class="ms-1 description"><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/timeZones">time zone</a> to use to format <code>eta_local</code></p></span></li><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">lroStatus</code><span class="ms-1 description"><p>The data from <code>ElvClient.LROStatus()</code> call</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>An object containing an <code>ok</code> attribute that is <code>true</code> if enhancement succeeded or <code>false</code> if
enhancement failed (generally due to bad <code>options</code> being passed in).
If enhancement was successful, a <code>result</code> attribute will contain the enhanced status object.
If enhancement failed, an <code>errors</code> attribute will contain an array of error message strings, and an <code>errorDetails</code>
attribute will contain an array with any available additional information.</p></span></li></ul></div></div><div class="description mt-1"><p>Processes a response from an <a href="https://eluv-io.github.io/elv-client-js/module-ElvClient_ABRPublishing.html#.LROStatus">ElvClient.LROStatus()</a>
API call, checking for stalled LROs and bad percentages, adding ETA fields if applicable, and adding a summary.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> enhanceLROStatus = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhanceLROStatus&#x27;</span>)
<span class="hljs-keyword">const</span> defaultOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/defaultOptions&#x27;</span>)

<span class="hljs-keyword">const</span> options = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title function_">defaultOptions</span>(), {<span class="hljs-attr">currentTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>})

<span class="hljs-comment">// assumes `client` contains a successfully prepared ElvClient instance</span>
<span class="hljs-keyword">const</span> statusResponse = <span class="hljs-keyword">await</span> client.<span class="hljs-title class_">LROStatus</span>({
  <span class="hljs-attr">libraryId</span>: <span class="hljs-string">&#x27;ilib_YOUR_LIBRARY_ID&#x27;</span>,
  <span class="hljs-attr">objectId</span>: <span class="hljs-string">&#x27;iq__YOUR_OBJECT_ID&#x27;</span>
});

<span class="hljs-comment">// check to make sure we received data back</span>
<span class="hljs-keyword">if</span> (statusResponse === <span class="hljs-literal">undefined</span>) {
  <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Received no job status information from server - no LROs started, or object already finalized?&quot;</span>);
}

<span class="hljs-comment">// EXAMPLE: SUCCESSFUL CALL</span>
<span class="hljs-keyword">const</span> enhancedStatus = <span class="hljs-title function_">enhanceLROStatus</span>(options, statusResponse)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(enhancedStatus, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="hljs-string">`{
  &quot;ok&quot;: true,
  &quot;result&quot;: {
    &quot;LROs&quot;: {
      &quot;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSv3L57AV3CPYHbLmk3E9SF1b&quot;: {
        &quot;duration&quot;: 0,
        &quot;duration_ms&quot;: 0,
        &quot;progress&quot;: {
          &quot;percentage&quot;: 0
        },
        &quot;estimated_time_left_h_m_s&quot;: &quot;unknown (not enough progress yet)&quot;,
        &quot;run_state&quot;: &quot;running&quot;,
        &quot;start&quot;: &quot;2022-04-09T05:09:00Z&quot;,
        &quot;seconds_since_last_update&quot;: 84
      },
      &quot;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSvGJyKKJpmqtmJ2fzo5Fb3Be&quot;: {
        &quot;duration&quot;: 12747000000,
        &quot;duration_ms&quot;: 12747,
        &quot;end&quot;: &quot;2022-04-09T05:09:13Z&quot;,
        &quot;progress&quot;: {
          &quot;percentage&quot;: 100
        },
        &quot;run_state&quot;: &quot;finished&quot;,
        &quot;start&quot;: &quot;2022-04-09T05:09:00Z&quot;
      }
    },
    &quot;summary&quot;: {
      &quot;run_state&quot;: &quot;running&quot;,
      &quot;estimated_time_left_h_m_s&quot;: &quot;unknown (not enough progress yet)&quot;
    }
  }
}`</span>

<span class="hljs-comment">// EXAMPLE: FAILED CALL</span>
<span class="hljs-keyword">const</span> badOptions = <span class="hljs-title function_">defaultOptions</span>() <span class="hljs-comment">// failed to set currentTime</span>
<span class="hljs-keyword">const</span> failedEnhancement = <span class="hljs-title function_">enhanceLROStatus</span>(badOptions, statusResponse)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(failedEnhancement, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="hljs-string">`{
  ok: false,
  errors: [
    &quot;options: expecting currentTime to be Date, got undefined&quot;
  ],
  errorDetails: [
    {
      &quot;path&quot;: &quot;currentTime&quot;,
      &quot;message&quot;: &quot;expecting currentTime to be Date, got undefined&quot;
    }
  ]
}`</span></code></pre></div><div class="section-id" id="enhanceLROStatusEntry"></div><div class="card" data-name="enhanceLROStatusEntry" data-access="public" data-category="Conversion" display=""><h2><a class="name" tabindex="3" href="#enhanceLROStatusEntry">enhanceLROStatusEntry</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhanceLROStatusEntry.js#L61"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Pair String Object → Ok Pair String Object | Err Array</code></div><small><em><strong class="ms-2 me-1">λ</strong>curried function</em></small><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">options</code><span class="ms-1 description"></span></li><li class="list-group-item"><strong>Date</strong><code class="ms-2 param-name">options.currentTime</code><span class="ms-1 description"><p>The value to use for current time when calculating ETA fields</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options.locale</code><span class="ms-1 description"><p>The locale to use when formatting the <code>eta_local</code> field</p></span></li><li class="list-group-item"><strong>Number</strong><code class="ms-2 param-name">options.stallThreshold</code><span class="ms-1 description"><p>How many seconds to allow to pass between LRO info updates before warning that LRO may have terminated</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options.timezone</code><span class="ms-1 description"><p>The timezone to use when formatting the <code>eta_local</code> field</p></span></li><li class="list-group-item"><strong>Pair</strong><code class="ms-2 param-name">lro</code><span class="ms-1 description"><p>A Crocks Pair with LRO ID as first element and LRO Status Entry as second element</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Result</strong><span class="ms-1 description"><p>Either <code>Err([errors])</code> or <code>Ok(Pair(lroId, enhancedStatusObject))</code></p></span></li></ul></div></div><div class="description mt-1"><p>Returns an enhanced copy of the status entry for a single LRO, wrapped in a
<a href="https://crocks.dev/docs/crocks/Result.html">Crocks Result</a>.</p>
<ul>
<li>Checks for bad options</li>
<li>Checks for bad reported progress percentage</li>
<li>Checks if LRO may be stalled</li>
<li>Adds ETA fields if applicable</li>
</ul>
<p>Bad options will cause an <code>Err</code> to be returned</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Pair</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-js-helpers/Pair&#x27;</span>)

<span class="hljs-keyword">const</span> defaultOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/defaultOptions&#x27;</span>)

<span class="hljs-keyword">const</span> options = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title function_">defaultOptions</span>(), {<span class="hljs-attr">currentTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>})

<span class="hljs-keyword">const</span> singleLRO = <span class="hljs-title class_">Pair</span>(
  <span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjJ2kukiD5NmnEgCP7iFFBjU&#x27;</span>,
  {
    <span class="hljs-string">&quot;duration&quot;</span>: <span class="hljs-number">335613000000</span>,
    <span class="hljs-string">&quot;duration_ms&quot;</span>: <span class="hljs-number">335613</span>,
    <span class="hljs-string">&quot;end&quot;</span>: <span class="hljs-string">&quot;2022-04-08T21:10:34Z&quot;</span>,
    <span class="hljs-string">&quot;progress&quot;</span>: {
      <span class="hljs-string">&quot;percentage&quot;</span>: <span class="hljs-number">100</span>
    },
    <span class="hljs-string">&quot;run_state&quot;</span>: <span class="hljs-string">&quot;finished&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;2022-04-08T21:05:00Z&quot;</span>
  }
)

<span class="hljs-comment">// EXAMPLE: Successful call</span>
<span class="hljs-title function_">enhanceLROStatusEntry</span>(options, singleLRO)          <span class="hljs-comment">//=&gt; Ok Pair(&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjJ2kukiD5NmnEgCP7iFFBjU&#x27;, {...})</span>

<span class="hljs-comment">// EXAMPLE: Failed call</span>
<span class="hljs-title function_">enhanceLROStatusEntry</span>(<span class="hljs-title function_">defaultOptions</span>(), singleLRO) <span class="hljs-comment">//=&gt; Err [error objects]</span></code></pre></div><div class="section-id" id="LROIdModel"></div><div class="card" data-name="LROIdModel" data-access="public" data-category="Model" display=""><h2><a class="name" tabindex="3" href="#LROIdModel">LROIdModel</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/LROIdModel.js#L32"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Model">Model</span></h2><div class="sig-container"><code class="sig">* → String | THROW</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Any</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>The input to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">String</strong><span class="ms-1 description"><p>The validated input, proxied by ObjectModel</p></span></li></ul></div></div><div class="description mt-1"><p>An <a href="http://objectmodel.js.org/">ObjectModel</a> which validates that an input
is:</p>
<ul>
<li>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">Javascript String</a></li>
<li>Matches the regex for an LRO ID</li>
</ul>
<p>If input passes validation, will return the input (proxied by ObjectModel)</p>
<p>Throws an exception if passed in an invalid value.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LROIdModel</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/LROIdModel&#x27;</span>)

<span class="hljs-title class_">LROIdModel</span>(<span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27; (proxied by ObjectModel)</span>

<span class="hljs-title class_">LROIdModel</span>(<span class="hljs-number">42</span>)                                                            <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;expecting String, got Number 42&#x27;</span>

<span class="hljs-title class_">LROIdModel</span>(<span class="hljs-string">&#x27;foo&#x27;</span>)                                                         <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;Value is not a valid LRO ID string &#x27;tlro...&#x27;  (got: foo)&#x27;</span></code></pre></div><div class="section-id" id="LROProgressModel"></div><div class="card" data-name="LROProgressModel" data-access="public" data-category="Model" display=""><h2><a class="name" tabindex="3" href="#LROProgressModel">LROProgressModel</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/LROProgressModel.js#L34"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Model">Model</span></h2><div class="sig-container"><code class="sig">* → Object | THROW</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Any</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>The input to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>The validated input, proxied by ObjectModel</p></span></li></ul></div></div><div class="description mt-1"><p>An <a href="http://objectmodel.js.org/">ObjectModel</a> to validate the <code>progress</code> attribute of an LRO Status entry</p>
<p>Throws an exception if passed in an invalid value.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LROProgressModel</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/LROProgressModel&#x27;</span>)

<span class="hljs-title class_">LROProgressModel</span>({})                            <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;expecting percentage to be Number, got undefined&#x27;</span>

<span class="hljs-title class_">LROProgressModel</span>({<span class="hljs-attr">percentage</span>: -<span class="hljs-number">2</span>})              <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;percentage must be &gt;= 0 (got: -2)&#x27;</span>

<span class="hljs-title class_">LROProgressModel</span>({<span class="hljs-attr">percentage</span>: <span class="hljs-number">10</span>})              <span class="hljs-comment">//=&gt; {percentage: 10} // proxied by ObjectModel</span>

<span class="hljs-title class_">LROProgressModel</span>({<span class="hljs-attr">percentage</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">files</span>: <span class="hljs-number">7</span>})    <span class="hljs-comment">//=&gt; {percentage: 10, files: 7} // proxied by ObjectModel</span>
<span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Object.keys and JSON.stringify will drop attributes not declared in model:</span>
<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
  <span class="hljs-title class_">LROProgressModel</span>({<span class="hljs-attr">percentage</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">files</span>: <span class="hljs-number">7</span>})
)                                               <span class="hljs-comment">//=&gt; &#x27;{&quot;percentage&quot;: 10}&#x27;</span>

<span class="hljs-title class_">LROProgressModel</span>(<span class="hljs-string">&#x27;foo&#x27;</span>)                         <span class="hljs-comment">//=&gt; EXCEPTION: `expecting Object, got String &quot;foo&quot;`</span></code></pre></div><div class="section-id" id="LROStatusEntryModel"></div><div class="card" data-name="LROStatusEntryModel" data-access="public" data-category="Model" display=""><h2><a class="name" tabindex="3" href="#LROStatusEntryModel">LROStatusEntryModel</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/LROStatusEntryModel.js#L48"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Model">Model</span></h2><div class="sig-container"><code class="sig">* → Object | THROW</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Any</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>The input to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>The validated input, proxied by ObjectModel</p></span></li></ul></div></div><div class="description mt-1"><p>An <a href="http://objectmodel.js.org/">ObjectModel</a> to validate the an LRO Status entry</p>
<p>Throws an exception if passed in an invalid value.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LROStatusEntryModel</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/LROStatusEntryModel&#x27;</span>)

<span class="hljs-title class_">LROStatusEntryModel</span>({})          <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;expecting duration to be Number, got undefined...&#x27;</span>

<span class="hljs-title class_">LROStatusEntryModel</span>({
  <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">duration_ms</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">progress</span>: {
    <span class="hljs-attr">percentage</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">run_state</span>: <span class="hljs-string">&#x27;running&#x27;</span>,
  <span class="hljs-attr">start</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>
 })                              <span class="hljs-comment">//=&gt; (copy of input object) // proxied by ObjectModel</span>

<span class="hljs-title class_">LROStatusEntryModel</span>({
  <span class="hljs-attr">duration</span>: -<span class="hljs-number">1</span>,
  <span class="hljs-attr">duration_ms</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">progress</span>: {
    <span class="hljs-attr">percentage</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">run_state</span>: <span class="hljs-string">&#x27;running&#x27;</span>,
  <span class="hljs-attr">start</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>
})                               <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;duration must be &gt;= 0 (got: -1)&#x27;</span>

<span class="hljs-title class_">LROStatusEntryModel</span>(<span class="hljs-string">&#x27;foo&#x27;</span>)       <span class="hljs-comment">//=&gt; EXCEPTION: `expecting Object, got String &quot;foo&quot;`</span></code></pre></div><div class="section-id" id="LROStatusModel"></div><div class="card" data-name="LROStatusModel" data-access="public" data-category="Model" display=""><h2><a class="name" tabindex="3" href="#LROStatusModel">LROStatusModel</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/LROStatusModel.js#L53"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Model">Model</span></h2><div class="sig-container"><code class="sig">* → Object | THROW</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Any</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>The input to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>The validated input, proxied by ObjectModel</p></span></li></ul></div></div><div class="description mt-1"><p>An <a href="http://objectmodel.js.org/">ObjectModel</a> to validate the response from an LROStatus() API call</p>
<p>Throws an exception if passed in an invalid value or an empty object.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LROStatusModel</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/LROStatusModel&#x27;</span>)

<span class="hljs-title class_">LROStatusModel</span>({})   <span class="hljs-comment">//=&gt; Exception: &quot;Value must not be empty (got: {})&quot;</span>

<span class="hljs-title class_">LROStatusModel</span>({
   <span class="hljs-attr">tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh</span>: {
     <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>,
     <span class="hljs-attr">duration_ms</span>: <span class="hljs-number">0</span>,
     <span class="hljs-attr">progress</span>: {
       <span class="hljs-attr">percentage</span>: <span class="hljs-number">0</span>
     },
     <span class="hljs-attr">run_state</span>: <span class="hljs-string">&#x27;running&#x27;</span>,
     <span class="hljs-attr">start</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>
   }
 })                  <span class="hljs-comment">//=&gt; (copy of input object) // proxied by ObjectModel</span>

<span class="hljs-title class_">LROStatusModel</span>({
   <span class="hljs-attr">foo</span>: {
     <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>,
     <span class="hljs-attr">duration_ms</span>: <span class="hljs-number">0</span>,
     <span class="hljs-attr">progress</span>: {
       <span class="hljs-attr">percentage</span>: <span class="hljs-number">0</span>
     },
     <span class="hljs-attr">run_state</span>: <span class="hljs-string">&#x27;running&#x27;</span>,
     <span class="hljs-attr">start</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>
   }
 })                  <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;invalid property name &#x27;foo&#x27; (is not a valid LROId)&#x27;</span>

<span class="hljs-title class_">LROStatusModel</span>({
   <span class="hljs-attr">tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh</span>: {}
 })                  <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;TypeError: key &#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27; points to a value that is an invalid LROStatusEntry (LROStatusEntry: expecting duration to be Number, got undefined...&#x27;</span>

<span class="hljs-title class_">LROStatusModel</span>(<span class="hljs-number">3</span>)    <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;expecting Object, got Number 3&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_CANCELLED_SHUTDOWN"></div><div class="card" data-name="LRO_RS_CANCELLED_SHUTDOWN" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_CANCELLED_SHUTDOWN">LRO_RS_CANCELLED_SHUTDOWN</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L90"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by node shutdown&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_CANCELLED_SHUTDOWN</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by node shutdown&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_CANCELLED_TIMEOUT"></div><div class="card" data-name="LRO_RS_CANCELLED_TIMEOUT" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_CANCELLED_TIMEOUT">LRO_RS_CANCELLED_TIMEOUT</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L64"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by timeout&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_CANCELLED_TIMEOUT</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by timeout&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_CANCELLED_USER"></div><div class="card" data-name="LRO_RS_CANCELLED_USER" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_CANCELLED_USER">LRO_RS_CANCELLED_USER</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L77"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by user&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_CANCELLED_USER</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by user&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_FAILED"></div><div class="card" data-name="LRO_RS_FAILED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_FAILED">LRO_RS_FAILED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L51"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;failed&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_FAILED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;failed&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_FINISHED"></div><div class="card" data-name="LRO_RS_FINISHED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_FINISHED">LRO_RS_FINISHED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L38"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;finished&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_FINISHED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;finished&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_NOT_STARTED"></div><div class="card" data-name="LRO_RS_NOT_STARTED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_NOT_STARTED">LRO_RS_NOT_STARTED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L12"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;not started&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_NOT_STARTED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;not started&#x27;</span></code></pre></div><div class="section-id" id="LRO_RS_RUNNING"></div><div class="card" data-name="LRO_RS_RUNNING" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RS_RUNNING">LRO_RS_RUNNING</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L25"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;running&quot;</code></p><div class="description mt-1"><p><code>run_state</code> string returned by server for LROs</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RS_RUNNING</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;running&#x27;</span></code></pre></div><div class="section-id" id="LRO_RUN_STATES"></div><div class="card" data-name="LRO_RUN_STATES" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#LRO_RUN_STATES">LRO_RUN_STATES</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/lroRunState.js#L103"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">Array.&lt;String&gt;</strong></p><div class="description mt-1"><p>A list of all the possible values returned by server for LRO <code>run_state</code></p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">LRO_RUN_STATES</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/lroRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; [&#x27;not started&#x27;, ..., &#x27;cancelled by node shutdown&#x27;]</span></code></pre></div><div class="section-id" id="mergeDefaultOptions"></div><div class="card" data-name="mergeDefaultOptions" data-access="public" data-category="Conversion" display=""><h2><a class="name" tabindex="3" href="#mergeDefaultOptions">mergeDefaultOptions</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/mergeDefaultOptions.js#L37"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">* → Result</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">options</code><span class="ms-1 description"><p>The options to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Result</strong><span class="ms-1 description"><p>A <a href="https://crocks.dev/docs/crocks/Result.html">Crocks Result</a></p></span></li></ul></div></div><div class="description mt-1"><p>Fills in missing options for <code>enhanceLROStatus()</code> with default values, validates after merging, then returns a
<a href="https://crocks.dev/docs/crocks/Result.html">Crocks Result</a>, either an <code>Ok</code> wrapping the final options or an <code>Err</code>
wrapping an array of errors.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mergeDefaultOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/mergeDefaultOptions&#x27;</span>)

<span class="hljs-title function_">mergeDefaultOptions</span>({
  <span class="hljs-attr">currentTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>,
  <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">&#x27;America/Los_Angeles&#x27;</span>
})                                  <span class="hljs-comment">//=&gt; Ok() wrapping a copy of input object with {stallThreshold: 900} merged in</span>

<span class="hljs-title class_">OptionsModel</span>({
  <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
  <span class="hljs-attr">stallThreshold</span>: <span class="hljs-number">900</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">&#x27;America/Los_Angeles&#x27;</span>
})                                  <span class="hljs-comment">//=&gt; Err([error object])</span></code></pre></div><div class="section-id" id="OptionsModel"></div><div class="card" data-name="OptionsModel" data-access="public" data-category="Model" display=""><h2><a class="name" tabindex="3" href="#OptionsModel">OptionsModel</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/OptionsModel.js#L35"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Model">Model</span></h2><div class="sig-container"><code class="sig">* → Object → Object | THROW</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>The options to validate</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>The validated options object</p></span></li></ul></div></div><div class="description mt-1"><p>An <a href="http://objectmodel.js.org/">ObjectModel</a> which validates that an input is:</p>
<ul>
<li>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Javascript Object</a></li>
<li>Satisfies the field definitions for <code>options</code> argument used by <code>enhanceLROStatus</code> and <code>enhanceLROStatusEntry</code>.</li>
</ul></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">OptionsModel</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/OptionsModel&#x27;</span>)

<span class="hljs-title class_">OptionsModel</span>({
  <span class="hljs-attr">currentTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>,
  <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
  <span class="hljs-attr">stallThreshold</span>: <span class="hljs-number">900</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">&#x27;America/Los_Angeles&#x27;</span>
})                                  <span class="hljs-comment">//=&gt; Object (proxied by ObjectModel)</span>

<span class="hljs-title class_">OptionsModel</span>({
  <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
  <span class="hljs-attr">stallThreshold</span>: <span class="hljs-number">900</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">&#x27;America/Los_Angeles&#x27;</span>
})                                  <span class="hljs-comment">//=&gt; EXCEPTION: &#x27;expecting currentTime to be Date, got undefined&#x27;</span></code></pre></div><div class="section-id" id="STATES"></div><div class="card" data-name="STATES" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATES">STATES</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L191"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">Array.&lt;String&gt;</strong></p><div class="description mt-1"><p>An array of all the enhanced <code>run_state</code> constants, ordered by increasing precedence. When creating a status summary,
states later in list will take precedence, e.g if one LRO is 'finished' and one LRO is 'running', the summary
<code>run_state</code> will be 'running'. Generally error/cancel states take precedence over <code>STATE_RUNNING</code>, which takes
precedence over the remaining states.</p>
<p>The order is:</p>
<ul>
<li>STATE_UNKNOWN</li>
<li>STATE_FINISHED</li>
<li>STATE_NOT_STARTED</li>
<li>STATE_RUNNING</li>
<li>STATE_STALLED</li>
<li>STATE_BAD_PCT</li>
<li>STATE_FAILED</li>
<li>STATE_CANCELLED_TIMEOUT</li>
<li>STATE_CANCELLED_SHUTDOWN</li>
<li>STATE_CANCELLED_USER</li>
</ul></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATES</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; [&#x27;unknown&#x27;, ..., &#x27;cancelled by user&#x27;]</span></code></pre></div><div class="section-id" id="STATE_BAD_PCT"></div><div class="card" data-name="STATE_BAD_PCT" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_BAD_PCT">STATE_BAD_PCT</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L16"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;bad percentage&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (NOT used by Eluvio Content Fabric servers) to indicate that an LRO has reported a bad number
for progress percentage (i.e. either &gt; 100 for any run_state, or &lt; 100 for run_state 'finished')</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_BAD_PCT</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;bad percentage&#x27;</span></code></pre></div><div class="section-id" id="STATE_CANCELLED_SHUTDOWN"></div><div class="card" data-name="STATE_CANCELLED_SHUTDOWN" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_CANCELLED_SHUTDOWN">STATE_CANCELLED_SHUTDOWN</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L33"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by node shutdown&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has been cancelled due
to a server shutdown.</p>
<p>Note that in practice this <code>run_state</code> is almost never encountered. (TODO: check implementation details)</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_CANCELLED_SHUTDOWN</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by node shutdown&#x27;</span></code></pre></div><div class="section-id" id="STATE_CANCELLED_TIMEOUT"></div><div class="card" data-name="STATE_CANCELLED_TIMEOUT" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_CANCELLED_TIMEOUT">STATE_CANCELLED_TIMEOUT</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L51"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by timeout&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has been cancelled due
to a timeout.</p>
<p>Note that in practice this <code>run_state</code> is almost never encountered. (TODO: check implementation details)</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_CANCELLED_TIMEOUT</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by timeout&#x27;</span></code></pre></div><div class="section-id" id="STATE_CANCELLED_USER"></div><div class="card" data-name="STATE_CANCELLED_USER" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_CANCELLED_USER">STATE_CANCELLED_USER</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L68"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;cancelled by user&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has been cancelled by
the user.</p>
<p>Note that in practice this <code>run_state</code> is almost never encountered. (TODO: check implementation details)</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_CANCELLED_USER</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;cancelled by user&#x27;</span></code></pre></div><div class="section-id" id="STATE_FAILED"></div><div class="card" data-name="STATE_FAILED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_FAILED">STATE_FAILED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L83"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;failed&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has encountered an error
and has terminated.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_FAILED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;failed&#x27;</span></code></pre></div><div class="section-id" id="STATE_FINISHED"></div><div class="card" data-name="STATE_FINISHED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_FINISHED">STATE_FINISHED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L100"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;finished&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has finished.</p>
<p>Note that if the LRO reports a progress percentage that is not <code>100</code>, the <code>run_state</code> will be set to <code>STATE_BAD_PCT</code>
instead.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_FINISHED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;finished&#x27;</span></code></pre></div><div class="section-id" id="STATE_NOT_STARTED"></div><div class="card" data-name="STATE_NOT_STARTED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_NOT_STARTED">STATE_NOT_STARTED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L117"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;not started&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO has not started yet.</p>
<p>Note that in practice this <code>run_state</code> is almost never encountered.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_NOT_STARTED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;not started&#x27;</span></code></pre></div><div class="section-id" id="STATE_RUNNING"></div><div class="card" data-name="STATE_RUNNING" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_RUNNING">STATE_RUNNING</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L132"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;running&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (also used by Eluvio Content Fabric servers) to indicate that an LRO is running.
Note that this does not guarantee that the LRO is actually running.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_RUNNING</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;running&#x27;</span></code></pre></div><div class="section-id" id="STATE_STALLED"></div><div class="card" data-name="STATE_STALLED" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_STALLED">STATE_STALLED</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L147"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;stalled&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (NOT used by Eluvio Content Fabric servers) to indicate that an LRO has not updated its
information in a while and may have terminated.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_STALLED</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;stalled&#x27;</span></code></pre></div><div class="section-id" id="STATE_UNKNOWN"></div><div class="card" data-name="STATE_UNKNOWN" data-access="public" data-category="Constant" display=""><h2><a class="name" tabindex="3" href="#STATE_UNKNOWN">STATE_UNKNOWN</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/enhancedRunState.js#L163"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">String</strong><code class="ms-2 value">&quot;unknown&quot;</code></p><div class="description mt-1"><p>An enhanced <code>run_state</code> (NOT used by Eluvio Content Fabric servers) to indicate that <code>run_state</code> cannot be determined.
This is an internal initializer value used as a starting point for summarizing a list of states, and should never
get returned to caller.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> {<span class="hljs-variable constant_">STATE_UNKNOWN</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/enhancedRunState&#x27;</span>)  <span class="hljs-comment">//=&gt; &#x27;unknown&#x27;</span></code></pre></div><div class="section-id" id="_enhanceLROStatus"></div><div class="card" data-name="_enhanceLROStatus" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_enhanceLROStatus">_enhanceLROStatus</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_enhanceLROStatus.js#L31"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Object → Object → Result</code></div><small><em><strong class="ms-2 me-1">λ</strong>curried function</em></small><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">options</code><span class="ms-1 description"><p>An object containing options for enhanceLROStatus call</p></span></li><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">lroStatus</code><span class="ms-1 description"><p>Data from an <code>ElvClient.LROStatus()</code> call - a key/value map with LRO ID key and LRO status value</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Result</strong><span class="ms-1 description"><p>A <a href="https://crocks.dev/docs/crocks/Result.html">Crocks Result</a> wrapping either the enhanced lroStatus object or an array of errors</p></span></li></ul></div></div><div class="description mt-1"><p>Enhance lroResult data obtained via <a href="https://eluv-io.github.io/elv-client-js/module-ElvClient_ABRPublishing.html#.LROStatus">ElvClient.LROStatus()</a>.</p>
<p>Returns a <a href="https://crocks.dev/docs/crocks/Result.html">Crocks Result</a>, either Ok(enhancedLROStatus)
or Err(array of errors)</p>
<p>Internal function, does not validate inputs or unwrap return value to supply a plain object to caller. See source code
for public counterpart <a href="#enhanceLROStatus">enhanceLROStatus</a> for example usage.</p></div></div><div class="section-id" id="_enhanceNonRunningEntry"></div><div class="card" data-name="_enhanceNonRunningEntry" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_enhanceNonRunningEntry">_enhanceNonRunningEntry</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_enhanceNonRunningEntry.js#L77"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Pair String Object → Pair String Object</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Pair</strong><code class="ms-2 param-name">lro</code><span class="ms-1 description"><p>A Crocks Pair with LRO ID as first element and LRO Status Entry as second element</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Pair</strong><span class="ms-1 description"><p>A Crocks Pair with LRO ID as first element and the enhanced copy of LRO Status Entry object with additional fields as second element</p></span></li></ul></div></div><div class="description mt-1"><p>Returns an enhanced copy of an LRO Status Entry for an LRO that does not have a <code>run_state</code> of <code>running</code>.
Checks for bad reported progress percentage.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Pair</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-js-helpers/Pair&#x27;</span>)

<span class="hljs-keyword">const</span> _enhanceNonRunningEntry = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/internal/_enhanceNonRunningEntry&#x27;</span>)

<span class="hljs-keyword">const</span> lro = <span class="hljs-title class_">Pair</span>(
  <span class="hljs-string">&#x27;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSvGJyKKJpmqtmJ2fzo5Fb3Be&#x27;</span>,
  {
    <span class="hljs-string">&quot;duration&quot;</span>: <span class="hljs-number">12747000000</span>,
    <span class="hljs-string">&quot;duration_ms&quot;</span>: <span class="hljs-number">12747</span>,
    <span class="hljs-string">&quot;end&quot;</span>: <span class="hljs-string">&quot;2022-04-09T05:09:13Z&quot;</span>,
    <span class="hljs-string">&quot;progress&quot;</span>: {
      <span class="hljs-string">&quot;percentage&quot;</span>: <span class="hljs-number">100</span>
    },
    <span class="hljs-string">&quot;run_state&quot;</span>: <span class="hljs-string">&quot;finished&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;2022-04-09T05:09:00Z&quot;</span>
  }
)

<span class="hljs-keyword">const</span> enhanced = <span class="hljs-title function_">_enhanceNonRunningEntry</span>(lro)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Pair</span>.<span class="hljs-title function_">fst</span>())
<span class="hljs-string">&#x27;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSvGJyKKJpmqtmJ2fzo5Fb3Be&#x27;</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(enhanced.<span class="hljs-title function_">snd</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="hljs-string">`{
  &quot;duration&quot;: 12747000000,
  &quot;duration_ms&quot;: 12747,
  &quot;end&quot;: &quot;2022-04-09T05:09:13Z&quot;,
  &quot;progress&quot;: {
    &quot;percentage&quot;: 100
  },
  &quot;run_state&quot;: &quot;finished&quot;,
  &quot;start&quot;: &quot;2022-04-09T05:09:00Z&quot;
}`</span>

<span class="hljs-comment">// change lro.progress.percentage to a bad value</span>
lro.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.<span class="hljs-property">progress</span>.<span class="hljs-property">percentage</span> = <span class="hljs-number">120</span>)

<span class="hljs-keyword">const</span> enhancedBadData = <span class="hljs-title function_">_enhanceNonRunningEntry</span>(lro)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(enhancedBadData.<span class="hljs-title function_">snd</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
<span class="hljs-string">`{
  &quot;duration&quot;: 12747000000,
  &quot;duration_ms&quot;: 12747,
  &quot;end&quot;: &quot;2022-04-09T05:09:13Z&quot;,
  &quot;progress&quot;: {
    &quot;percentage&quot;: 120
  },
  &quot;run_state&quot;: &quot;bad percentage&quot;,
  &quot;start&quot;: &quot;2022-04-09T05:09:00Z&quot;,
  &quot;reported_run_state&quot;: &quot;finished&quot;,
  &quot;warning&quot;: &quot;Job tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSvGJyKKJpmqtmJ2fzo5Fb3Be has run_state &#x27;finished&#x27;, but progress pct is 120&quot;
}`</span></code></pre></div><div class="section-id" id="_enhanceRunningEntry"></div><div class="card" data-name="_enhanceRunningEntry" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_enhanceRunningEntry">_enhanceRunningEntry</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_enhanceRunningEntry.js#L89"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Object → Pair String Object → Pair String Object</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">options</code><span class="ms-1 description"></span></li><li class="list-group-item"><strong>Date</strong><code class="ms-2 param-name">options.currentTime</code><span class="ms-1 description"><p>The value to use for current time when calculating ETA fields</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options.locale</code><span class="ms-1 description"><p>The locale to use when formatting the <code>eta_local</code> field</p></span></li><li class="list-group-item"><strong>Number</strong><code class="ms-2 param-name">options.stallThreshold</code><span class="ms-1 description"><p>How many seconds to allow to pass between LRO info updates before warning that LRO may have terminated</p></span></li><li class="list-group-item"><strong>String</strong><code class="ms-2 param-name">options.timezone</code><span class="ms-1 description"><p>The timezone to use when formatting the <code>eta_local</code> field</p></span></li><li class="list-group-item"><strong>Pair</strong><code class="ms-2 param-name">lro</code><span class="ms-1 description"><p>A Crocks Pair with LRO ID as first element and LRO Status Entry as second element</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Pair</strong><span class="ms-1 description"><p>A Crocks Pair with LRO ID as first element and the enhanced copy of LRO Status Entry object with additional fields as second element</p></span></li></ul></div></div><div class="description mt-1"><p>Returns an enhanced copy of an LRO Status Entry for a running LRO.
Checks for bad reported progress percentage and stalled LROs
Adds ETA fields if possible</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Pair</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-js-helpers/Pair&#x27;</span>)

<span class="hljs-keyword">const</span> defaultOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/defaultOptions&#x27;</span>)
<span class="hljs-keyword">const</span> _enhanceRunningEntry = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/internal/_enhanceRunningEntry&#x27;</span>)

<span class="hljs-comment">// for this example, current time is 2022-04-08T21:34:10Z</span>
<span class="hljs-keyword">const</span> options = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title function_">defaultOptions</span>(), {<span class="hljs-attr">currentTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>})

<span class="hljs-keyword">const</span> lro = <span class="hljs-title class_">Pair</span>(
  <span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27;</span>,
  {
    <span class="hljs-string">&quot;duration&quot;</span>: <span class="hljs-number">1390740000000</span>,
    <span class="hljs-string">&quot;duration_ms&quot;</span>: <span class="hljs-number">1390740</span>,
    <span class="hljs-string">&quot;progress&quot;</span>: {
      <span class="hljs-string">&quot;percentage&quot;</span>: <span class="hljs-number">76.66666666666667</span>
    },
    <span class="hljs-string">&quot;run_state&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;2022-04-08T21:05:00Z&quot;</span>
  }
)

<span class="hljs-keyword">const</span> enhanced = <span class="hljs-title function_">_enhanceRunningEntry</span>(options, lro)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Pair</span>.<span class="hljs-title function_">fst</span>())
<span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27;</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">Pair</span>.<span class="hljs-title function_">snd</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="hljs-string">`{
  &quot;duration&quot;: 1390740000000,
  &quot;duration_ms&quot;: 1390740,
  &quot;progress&quot;: {
    &quot;percentage&quot;: 76.66666666666667
  },
  &quot;run_state&quot;: &quot;running&quot;,
  &quot;start&quot;: &quot;2022-04-08T21:05:00Z&quot;,
  &quot;seconds_since_last_update&quot;: 359,
  &quot;estimated_time_left_seconds&quot;: 533,
  &quot;estimated_time_left_h_m_s&quot;: &quot;8m 53s&quot;,
  &quot;eta_local&quot;: &quot;2:43:03 PM PDT&quot;
}`</span>

<span class="hljs-comment">// if current time were instead 1 hour later (2022-04-08T22:34:10Z) then output would be:</span>
<span class="hljs-string">`{
  &quot;duration&quot;: 1390740000000,
  &quot;duration_ms&quot;: 1390740,
  &quot;progress&quot;: {
    &quot;percentage&quot;: 76.66666666666667
  },
  &quot;run_state&quot;: &quot;stalled&quot;,
  &quot;start&quot;: &quot;2022-04-08T21:05:00Z&quot;,
  &quot;seconds_since_last_update&quot;: 3959,
  &quot;estimated_time_left_seconds&quot;: 1628,
  &quot;estimated_time_left_h_m_s&quot;: &quot;27m 08s&quot;,
  &quot;eta_local&quot;: &quot;4:01:18 PM PDT&quot;,
  &quot;reported_run_state&quot;: &quot;running&quot;,
  &quot;warning&quot;: &quot;status has not been updated in 3959 seconds, process may have terminated&quot;
}`</span></code></pre></div><div class="section-id" id="_maxEnhancedState"></div><div class="card" data-name="_maxEnhancedState" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_maxEnhancedState">_maxEnhancedState</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_maxEnhancedState.js#L35"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">[String] → String</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Array.&lt;String&gt;</strong><code class="ms-2 param-name">list</code><span class="ms-1 description"><p>An array of enhanced run states</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">String</strong><span class="ms-1 description"><p>The state with the highest precedence, or value or <code>STATE_UNKNOWN</code> if <code>list</code> is empty.</p></span></li></ul></div></div><div class="description mt-1"><p>Returns the enhanced run state with maximum precedence from a list, or <code>STATE_UNKNOWN</code> if an empty list passed in</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> _maxEnhancedState = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/internal/_maxEnhancedState&#x27;</span>)

<span class="hljs-title function_">_maxEnhancedState</span>([<span class="hljs-string">&#x27;running&#x27;</span>, <span class="hljs-string">&#x27;stalled&#x27;</span>]) <span class="hljs-comment">//=&gt; &#x27;stalled&#x27;</span>

<span class="hljs-title function_">_maxEnhancedState</span>([])                     <span class="hljs-comment">//=&gt; &#x27;unknown&#x27;</span></code></pre></div><div class="section-id" id="_progressPct"></div><div class="card" data-name="_progressPct" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_progressPct">_progressPct</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_progressPct.js#L21"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Object → Number | undefined</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name"><em>(unnamed)</em></code><span class="ms-1 description"><p>An LRO Status Entry object</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Number</strong><span class="ms-1 description"><p>The value or <code>undefined</code> if not found</p></span></li></ul></div></div><div class="description mt-1"><p>Retrieves progress percentage from LRO Status entry, protecting against missing keys</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> _progressPct = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/internal/_progressPct&#x27;</span>)

<span class="hljs-title function_">_progressPct</span>({<span class="hljs-attr">progress</span>: {<span class="hljs-attr">percentage</span>: <span class="hljs-number">10</span>}}) <span class="hljs-comment">//=&gt; 10</span>

<span class="hljs-title function_">_progressPct</span>({})                           <span class="hljs-comment">//=&gt; undefined</span></code></pre></div><div class="section-id" id="_STATE_PRECEDENCE"></div><div class="card" data-name="_STATE_PRECEDENCE" data-access="private" data-category="Constant" display="none"><h2><a class="name" tabindex="3" href="#_STATE_PRECEDENCE">_STATE_PRECEDENCE</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_maxEnhancedState.js#L15"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Constant">Constant</span></h2><p class="fs-5"><em>Type:</em><strong class="ms-1">Object</strong></p><div class="description mt-1"><p>A lookup table for enhanced run state precedence {unknown: 0, finished: 1, ...}</p></div></div><div class="section-id" id="_sumEnhancedEntries"></div><div class="card" data-name="_sumEnhancedEntries" data-access="private" data-category="Conversion" display="none"><h2><a class="name" tabindex="3" href="#_sumEnhancedEntries">_sumEnhancedEntries</a><a class="source-code-link" target="_blank" title="View source on GitHub" href="https://github.com/eluv-io/elv-lro-status/blob/v3.0.5/src/internal/_sumEnhancedEntries.js#L96"><img src="./images/box-arrow-up-right.svg"/></a><span class="label-category-big" data-category="Conversion">Conversion</span></h2><div class="sig-container"><code class="sig">Object → Object</code></div><div class="params" data-expanded="false"><a class="toggle-params" href="#expand">Parameters</a><div class="details panel panel-default"><ul class="list-group"><li class="list-group-item"><strong>Object</strong><code class="ms-2 param-name">enhancedLROStatus</code><span class="ms-1 description"><p>An object where the keys are LRO IDs and the values are enhanced LRO Status Entries</p></span></li><li class="list-group-item"><em>Returns:</em><strong class="ms-1">Object</strong><span class="ms-1 description"><p>The summary object</p></span></li></ul></div></div><div class="description mt-1"><p>Returns a summary for an object containing enhanced LRO Status Entries</p>
<p>Returns an overall <code>run_state</code> and (if applicable) ETA fields.</p></div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> _sumEnhancedEntries = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@eluvio/elv-lro-status/internal/_sumEnhancedEntries&#x27;</span>)

<span class="hljs-keyword">const</span> enhancedEntriesNoProgress = {
  <span class="hljs-string">&quot;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSv3L57AV3CPYHbLmk3E9SF1b&quot;</span>: {
    <span class="hljs-string">&quot;duration&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;duration_ms&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;progress&quot;</span>: {
      <span class="hljs-string">&quot;percentage&quot;</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-string">&quot;estimated_time_left_h_m_s&quot;</span>: <span class="hljs-string">&quot;unknown (not enough progress yet)&quot;</span>,
    <span class="hljs-string">&quot;run_state&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;2022-04-09T05:09:00Z&quot;</span>,
    <span class="hljs-string">&quot;seconds_since_last_update&quot;</span>: <span class="hljs-number">84</span>
  },
  <span class="hljs-string">&quot;tlro1Ejh9gNWAaTmfWJKeuu99V2MZ17XXkSvGJyKKJpmqtmJ2fzo5Fb3Be&quot;</span>: {
    <span class="hljs-string">&quot;duration&quot;</span>: <span class="hljs-number">12747000000</span>,
    <span class="hljs-string">&quot;duration_ms&quot;</span>: <span class="hljs-number">12747</span>,
    <span class="hljs-string">&quot;end&quot;</span>: <span class="hljs-string">&quot;2022-04-09T05:09:13Z&quot;</span>,
    <span class="hljs-string">&quot;progress&quot;</span>: {
      <span class="hljs-string">&quot;percentage&quot;</span>: <span class="hljs-number">100</span>
    },
    <span class="hljs-string">&quot;run_state&quot;</span>: <span class="hljs-string">&quot;finished&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;2022-04-09T05:09:00Z&quot;</span>
  }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">_sumEnhancedEntries</span>(enhancedEntriesNoProgress), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
<span class="hljs-string">`{
  &quot;run_state&quot;: &quot;running&quot;,
  &quot;estimated_time_left_h_m_s&quot;: &quot;unknown (not enough progress yet)&quot;
}`</span>


<span class="hljs-keyword">const</span> enhancedEntriesWithProgress = {
  <span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjJ2kukiD5NmnEgCP7iFFBjU&#x27;</span>: {
    <span class="hljs-string">&#x27;duration&#x27;</span>: <span class="hljs-number">335613000000</span>,
    <span class="hljs-string">&#x27;duration_ms&#x27;</span>: <span class="hljs-number">335613</span>,
    <span class="hljs-string">&#x27;end&#x27;</span>: <span class="hljs-string">&#x27;2022-04-08T21:10:34Z&#x27;</span>,
    <span class="hljs-string">&#x27;progress&#x27;</span>: {
      <span class="hljs-string">&#x27;percentage&#x27;</span>: <span class="hljs-number">100</span>
    },
    <span class="hljs-string">&#x27;run_state&#x27;</span>: <span class="hljs-string">&#x27;finished&#x27;</span>,
    <span class="hljs-string">&#x27;start&#x27;</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>
  },
  <span class="hljs-string">&#x27;tlro1EjdMMAvWb5iJn2isHdgESes1dq12kpjXCExCepbpWfwMpo2haCxnh&#x27;</span>: {
    <span class="hljs-string">&#x27;duration&#x27;</span>: <span class="hljs-number">1390740000000</span>,
    <span class="hljs-string">&#x27;duration_ms&#x27;</span>: <span class="hljs-number">1390740</span>,
    <span class="hljs-string">&#x27;progress&#x27;</span>: {
      <span class="hljs-string">&#x27;percentage&#x27;</span>: <span class="hljs-number">76.66666666666667</span>
    },
    <span class="hljs-string">&#x27;run_state&#x27;</span>: <span class="hljs-string">&#x27;running&#x27;</span>,
    <span class="hljs-string">&#x27;start&#x27;</span>: <span class="hljs-string">&#x27;2022-04-08T21:05:00Z&#x27;</span>,
    <span class="hljs-string">&#x27;seconds_since_last_update&#x27;</span>: <span class="hljs-number">359</span>,
    <span class="hljs-string">&#x27;estimated_time_left_seconds&#x27;</span>: <span class="hljs-number">423</span>,
    <span class="hljs-string">&#x27;estimated_time_left_h_m_s&#x27;</span>: <span class="hljs-string">&#x27;7m 03s&#x27;</span>,
    <span class="hljs-string">&#x27;eta_local&#x27;</span>: <span class="hljs-string">&#x27;2:41:13 PM PDT&#x27;</span>
  }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">_sumEnhancedEntries</span>(enhancedEntriesWithProgress), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
<span class="hljs-string">`{
  &quot;run_state&quot;: &quot;running&quot;,
  &quot;estimated_time_left_seconds&quot;: 423,
  &quot;estimated_time_left_h_m_s&quot;: &quot;7m 03s&quot;,
  &quot;eta_local&quot;: &quot;2:41:13 PM PDT&quot;
}`</span>
 <span class="hljs-string">`</span></code></pre></div></div></div><script src="./js/ramda.min.js"></script><script src="./js/main.js"></script></div></body></html>